{% extends "base.html" %}

{% block content %}
<h3>以下のタイヤを出庫しますか？</h3>
<form method="POST" action="{{ url_for('dispatch_confirm') }}">
    <table>
        <thead>
            <tr>
                <th>幅</th>
                <th>アスペクト比</th>
                <th>インチ</th>
                <th>プライレーティング</th>
            </tr>
        </thead>
        <tbody>
            <!-- 共通データの行 -->
            {% if tires_to_dispatch|length > 0 %}
            <tr>
                <td>
                    <input type="hidden" name="width" value="{{ tires_to_dispatch[0].width_ref.value }}">
                    {{ tires_to_dispatch[0].width_ref.value }}
                </td>
                <td>
                    <input type="hidden" name="aspect_ratio" value="{{ tires_to_dispatch[0].aspect_ratio_ref.value }}">
                    {{ tires_to_dispatch[0].aspect_ratio_ref.value }}
                </td>
                <td>
                    <input type="hidden" name="inch" value="{{ tires_to_dispatch[0].inch_ref.value }}">
                    {{ tires_to_dispatch[0].inch_ref.value }}
                </td>
                <td>
                    <input type="hidden" name="ply_rating" value="{{ tires_to_dispatch[0].ply_rating_ref.value }}">
                    {{ tires_to_dispatch[0].ply_rating_ref.value }}
                </td>
            </tr>
            {% endif %}
        </tbody>
    </table>
    <button type="submit" class="btn btn-success">確認</button>
</form>

<!-- 戻るボタン -->
<form method="POST" action="{{ url_for('dispatch') }}">
    <input type="hidden" name="action" value="back">
    
    <!-- 検索条件を隠しフィールドで送信 --> 
    <input type="hidden" name="width" value="{{ session.get('search_conditions', {}).get('width', '') }}"> 
    <input type="hidden" name="aspect_ratio" value="{{ session.get('search_conditions', {}).get('aspect_ratio', '') }}"> 
    <input type="hidden" name="inch" value="{{ session.get('search_conditions', {}).get('inch', '') }}"> 
    <input type="hidden" name="ply_rating" value="{{ session.get('search_conditions', {}).get('ply_rating', '') }}"> 
    <p>Width: {{ session.get('search_conditions', {}).get('width', '') }}</p> 
    <p>Aspect Ratio: {{ session.get('search_conditions', {}).get('aspect_ratio', '') }}</p> 
    <p>Inch: {{ session.get('search_conditions', {}).get('inch', '') }}</p> 
    <p>Ply Rating: {{ session.get('search_conditions', {}).get('ply_rating', '') }}</p>
    <!-- 選択済みのタイヤIDを送信 -->
    {% for tire_id in selected_tires %}
        <input type="hidden" name="tire_ids" value="{{ tire_id }}">
    {% endfor %}

    <button type="submit">戻る</button>
</form>
{% endblock %}
