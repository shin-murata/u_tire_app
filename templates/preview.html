<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</title>
</head>
<body>
    <h2>âœ… PDF ã‚’é–‹ãæº–å‚™ãŒã§ãã¾ã—ãŸ</h2>
    <button id="openPdfButton">ğŸ“„ PDF ã‚’é–‹ã</button>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var pdfUrl = "{{ pdf_url }}";  // Flask ã‹ã‚‰å—ã‘å–ã£ãŸ PDF ã® URL
            var button = document.getElementById("openPdfButton");

            if (!pdfUrl) {
                console.log("ğŸš¨ PDF URL ãŒå—ä¿¡ã§ãã¾ã›ã‚“ã§ã—ãŸ");
                document.body.innerHTML = "<h2>ğŸš¨ PDF ã® URL ãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ</h2>";
                return;
            }

            console.log("ğŸš€ PDF ã‚’é–‹ãæº–å‚™å®Œäº†:", pdfUrl);

            button.addEventListener("click", function () {
                let newWindow = window.open(pdfUrl, '_blank');

                if (!newWindow || newWindow.closed || typeof newWindow.closed == 'undefined') {
                    alert("âš ï¸ ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ–ãƒ­ãƒƒã‚¯ãŒåŸå› ã§PDFã‚’é–‹ã‘ã¾ã›ã‚“ã§ã—ãŸã€‚æ‰‹å‹•ã§URLã‚’é–‹ã„ã¦ãã ã•ã„: " + pdfUrl);
                } else {
                    setTimeout(() => window.close(), 1000);  // **ç¾åœ¨ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã‚‹**
                }
            });
        });
    </script>
</body>
</html>
