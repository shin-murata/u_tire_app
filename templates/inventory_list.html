<form method="POST">
    <label for="filter_column">絞り込むカラム:</label>
    <select name="filter_column" id="filter_column">
        <option value="">選択してください</option>
        {% for column, values in filters.items() %}
        <option value="{{ column }}" {% if selected_column == column %}selected{% endif %}>
            {{ column }}
        </option>
        {% endfor %}
    </select>

    <label for="filter_value">値:</label>
    <select name="filter_value" id="filter_value">
        <option value="">選択してください</option>
        {% if selected_column %}
            {% for item in filters[selected_column] %}
            <option value="{{ item.id }}" {% if selected_value == item.id %}selected{% endif %}>
                {{ item.value if 'value' in item else item.name }}
            </option>
            {% endfor %}
        {% endif %}
    </select>

    <button type="submit" name="action" value="filter">絞り込み</button>
</form>

<!-- 絞り込み後のデータ表示 -->
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>登録日</th>
            <th>Width</th>
            <th>Aspect Ratio</th>
            <th>Inch</th>
            <th>Ply Rating</th>
            <th>Manufacturer</th>
            <th>manufacturing_year</th>
            <th>Price</th>
            <th>Tread Depth</th>
            <th>Uneven Wear</th>
            <th>Is Dispatched</th>
            <th>Other Details</th>
        </tr>
    </thead>
    <tbody>
        {% for tire in tires %}
        <tr>
            <td>{{ tire.id }}</td>
            <td>{{ tire.registration_date }}</td>
            <td>{{ tire.width_ref.value }}</td>
            <td>{{ tire.aspect_ratio_ref.value }}</td>
            <td>{{ tire.inch_ref.value }}</td>
            <td>{{ tire.ply_rating_ref.value }}</td>
            <td>{{ tire.manufacturer_ref.name }}</td>
            <td>{{ tire.manufacturing_year }}</td>
            <td>{{ tire.price }}</td>
            <td>{{ tire.tread_depth }}</td>
            <td>{{ tire.uneven_wear }}</td>
            <td>{{ tire.is_dispatched }}</td>
            <td>{{ tire.other_details }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
